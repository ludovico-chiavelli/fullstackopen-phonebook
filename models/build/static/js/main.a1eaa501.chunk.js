(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(1),c=t.n(o),r=t(14),a=t.n(r),s=t(3),i=t(4),l=t.n(i),u="http://localhost:3001/api/persons",d={getAll:function(){return l.a.get(u)},create:function(e){return l.a.post(u,e)},update:function(e,n){return l.a.put("".concat(u,"/").concat(e),n)},remove:function(e){return l.a.delete("".concat(u,"/").concat(e))}},h=t(0),b=function(e){var n=e.searchTerm,t=e.handleSearchChange;return Object(h.jsxs)("div",{children:["filter shown with"," ",Object(h.jsx)("input",{value:n,onChange:t})]})},f=function(e){var n=e.persons,t=e.setPersons,o=e.newName,c=e.setNewName,r=e.newNumber,a=e.setNewNumber,s=e.handleNameChange,i=e.handleNumberChange,l=e.setMessage,u=e.setNotificationColor;return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();for(var s=[],i=0;i<n.length;i++)s.push(n[i].name);if(s.includes(o))window.confirm("".concat(o," is already in the phonebook. Would you like to replace the old number with the new one?"))&&d.getAll().then((function(e){return e.data.find((function(e){return e.name===o}))})).then((function(e){var n={name:e.name,phoneNumber:r};d.update(e.id,n).then((function(e){console.log(e),d.getAll().then((function(e){t(e.data)}))}))})).catch((function(){u({color:"red"}),l("Information of ".concat(o," has alredy been removed from the server.\n").concat(o," will now be removed from view.")),c(""),a(""),setTimeout((function(){l(null),d.getAll().then((function(e){t(e.data)}))}),5e3)})),c(""),a("");else{var h={name:o,phoneNumber:r};d.create(h).then((function(e){console.log(e),u({color:"green"}),t(n.concat(e.data)),l("Added ".concat(o)),c(""),a(""),setTimeout((function(){return l(null)}),5e3)})).catch((function(e){u({color:"red"}),console.log(e),l("".concat(e.response.data.error)),c(""),a(""),setTimeout((function(){l(null),d.getAll().then((function(e){t(e.data)}))}),5e3)}))}},children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:o,onChange:s})]}),Object(h.jsxs)("div",{children:["phone number:",Object(h.jsx)("input",{value:r,onChange:i})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){var n=e.handlePersonDeletion,t=e.id;return Object(h.jsx)("button",{onClick:function(){n(t)},children:"delete"})},m=function(e){var n=e.persons,t=e.newSearch,o=e.handlePersonDeletion,c=e.setPersons;return Object(h.jsx)("div",{children:n.filter((function(e){return(""===t||!!e.name.toLowerCase().includes(t.toLowerCase()))&&e})).map((function(e){return Object(h.jsxs)("p",{children:[e.name," ",e.phoneNumber,Object(h.jsx)(j,{handlePersonDeletion:o,id:e.id,setPersons:c})]},e.name)}))})},O=function(e){var n=e.message,t=e.color;return null===n?null:Object(h.jsx)("div",{className:"notification",style:t,children:n})},v=function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),a=Object(s.a)(r,2),i=a[0],l=a[1],u=Object(o.useState)(""),j=Object(s.a)(u,2),v=j[0],g=j[1],p=Object(o.useState)(""),w=Object(s.a)(p,2),N=w[0],x=w[1],C=Object(o.useState)(null),S=Object(s.a)(C,2),A=S[0],P=S[1],y=Object(o.useState)({color:"green"}),k=Object(s.a)(y,2),D=k[0],T=k[1];return Object(o.useEffect)((function(){d.getAll().then((function(e){console.log(e.data),c(e.data)}))}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{message:A,color:D}),Object(h.jsx)(b,{searchTerm:N,handleSearchChange:function(e){x(e.target.value)}}),Object(h.jsx)("h2",{children:"Add a new person"}),Object(h.jsx)(f,{persons:t,setPersons:c,newName:i,setNewName:l,newNumber:v,setNewNumber:g,handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){g(e.target.value)},setMessage:P,setNotificationColor:T}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(m,{persons:t,setPersons:c,setNewName:l,setNewNumber:g,newSearch:N,handlePersonDeletion:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Do you really want to delete ".concat(n,"?"))&&d.remove(e).then((function(e){console.log(e),d.getAll().then((function(e){console.log(e.data),c(e.data)}))})).catch((function(){T({color:"red"}),P("Information of ".concat(n," has alredy been removed from the server. \n").concat(n," will now be removed from view.")),l(""),g(""),setTimeout((function(){P(null),d.getAll().then((function(e){c(e.data)}))}),5e3)}))}})]})};t(38);a.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a1eaa501.chunk.js.map